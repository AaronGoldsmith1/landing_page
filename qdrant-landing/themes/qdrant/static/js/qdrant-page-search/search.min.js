!function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function r(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,i(e,t,"get"))}function a(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,i(e,t,"set"),n),n}function i(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var s=new WeakMap,o=new WeakMap,l=function(){function i(e){var t=this,r=e.modalOuterSelector,l=e.modalDialogSelector,c=e.closeBtnSelector,u=e.resultSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n(this,s,{writable:!0,value:void 0}),n(this,o,{writable:!0,value:void 0}),this.modal=document.querySelector(r),this.dialog=document.querySelector(l),this.openBtn=document.querySelector('[data-target="#searchModal"]'),this.closeBtn=this.modal.querySelector(c),this.result=this.modal.querySelector(u),a(this,s,new Event("qdrModalShow")),a(this,o,new Event("qdrModalHide"));var d=this.show.bind(this),h=this.hide.bind(this);this.openBtn.addEventListener("click",d),this.modal.addEventListener("click",(function(e){var n=t.dialog.contains(e.target)||e.target===t.dialog,r=t.closeBtn.contains(e.target)||e.target===t.closeBtn;n&&!r||h(e)})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&h(e)}))}var l,c;return l=i,(c=[{key:"show",value:function(){this.modal.style.display="block",this.modal.classList.add("active"),document.dispatchEvent(r(this,s))}},{key:"hide",value:function(){var e=this.modal,t=r(this,o);e.classList.remove("active");var n=setTimeout((function(){e.style.display="none",document.dispatchEvent(t),clearTimeout(n)}),300)}},{key:"updateResultChildren",value:function(t){var n,r;(n=this.result).replaceChildren.apply(n,function(t){if(Array.isArray(t))return e(t)}(r=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}}])&&t(l.prototype,c),Object.defineProperty(l,"prototype",{writable:!1}),i}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function d(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,v(e,t,"get"))}function h(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,v(e,t,"set"),n),n}function v(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var p=new WeakMap,f=new WeakMap,y=function(){function e(t){var n=this,r=t.apiUrl;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,p,{writable:!0,value:void 0}),u(this,f,{writable:!0,value:void 0}),this._input=document.querySelector("#searchInput"),this.apiUrl=r,this._data=[],this._error=void 0,h(this,p,new Event("searchDataIsReady")),h(this,f,0),this._input.addEventListener("input",(function(e){0===e.target.value.trim().length?(n._data=[],document.dispatchEvent(d(n,p))):n.fetchData(e.target.value)}))}var t,n;return t=e,(n=[{key:"input",get:function(){return this._input},set:function(e){this._input=e}},{key:"data",get:function(){return this._data},set:function(e){this._data=e}},{key:"error",get:function(){return this._error},set:function(e){this._error=e}},{key:"fetchData",value:function(e){var t=this;if(0!==this.input.value.trim().length){var n=new URL(this.apiUrl,document.location);n.searchParams.append("q",this.input.value);var r=d(this,f)+1;fetch(n).then((function(e){return e.ok?e.json():{result:[],error:e.statusText}})).then((function(e){r>d(t,f)&&(t.data=e.result,h(t,f,r),t.error=null==e?void 0:e.error,document.dispatchEvent(d(t,p)))})).catch((function(e){t.error=e.message}))}}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(t){var n=t.searchApiUrl;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apiUrl=n,this.modal=new l({modalOuterSelector:"#searchModal",modalDialogSelector:".qdr-search__dialog",closeBtnSelector:".qdr-search__close",resultSelector:".qdr-search__results"}),this.searchInput=new y({apiUrl:this.apiUrl}),this.activeResultIdx=null,document.addEventListener("qdrModalShow",this.setFocusToInput.bind(this)),document.addEventListener("searchDataIsReady",this.updateResult.bind(this));var r=this.navigateTroughResults.bind(this);document.addEventListener("keydown",(function(e){"ArrowUp"!==e.key&&"ArrowDown"!==e.key||r(e)}))}var t,n;return t=e,(n=[{key:"activeResultIdx",get:function(){return this._activeResultIdx},set:function(e){this._activeResultIdx=e}},{key:"generateSearchResult",value:function(e){var t=document.createElement("a");return t.classList.add("qdr-search-result"),t.href=function(e){var t,n,r=new URL(null==e||null===(t=e.payload)||void 0===t?void 0:t.url);return r.searchParams.append("selector",window.btoa(null==e||null===(n=e.payload)||void 0===n?void 0:n.location)),r.toString()}(e),t.innerHTML='<span class="qdr-search-result__icon"></span>\n                   <div class="qdr-search-result__body"><h5 class="mt-0">'.concat(e.payload.titles.join(" > "),"</h5>\n                   <p>").concat(e.payload.text,"</p></div>"),t}},{key:"updateResult",value:function(){var e=this,t=[];this.activeResultIdx=null,this.searchInput.data.forEach((function(n,r){var a=e.generateSearchResult(n);a.dataset.key=r,t.push(a)})),this.modal.updateResultChildren(t)}},{key:"setFocusToInput",value:function(){this.searchInput.input.focus()}},{key:"setFocusToResult",value:function(e){var t,n=this.modal.result.querySelectorAll(".qdr-search-result");0!==n.length&&(t=n,function(e){if(Array.isArray(e))return m(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).find((function(t){return parseInt(t.dataset.key)===parseInt(e)})).focus()}},{key:"navigateTroughResults",value:function(e){var t;if("ArrowUp"===e.key){if(!((t=this.activeResultIdx-1)>=0))return this.activeResultIdx=null,void this.setFocusToInput();this.activeResultIdx=t}"ArrowDown"===e.key&&((t=null===this.activeResultIdx?0:this.activeResultIdx+1)<this.searchInput.data.length?this.activeResultIdx=t:this.activeResultIdx=0),this.setFocusToResult(this.activeResultIdx)}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();window.initQdrantSearch=function(e){var t,n=e.searchApiUrl;return document.body.appendChild(('<div class="qdr-search" id="searchModal" tabindex="-1"\n    aria-labelledby="searchModalLabel" aria-hidden="true">\n    <div class="qdr-search__dialog">\n        <div class="qdr-search__content">\n            <div class="qdr-search__header">\n                <div class="qdr-search__title">\n                    <div class="qdr-search__icon">\n                        <span class="search-icon"></span>\n                    </div>\n                    <input type="text" class="qdr-search__input" placeholder="Search..."\n                          id="searchInput" aria-label="Search">\n                </div>\n\n                <button type="button" class="qdr-search__close" aria-label="Close">\n                    <span aria-hidden="true">&times;</span>\n                </button>\n            </div>\n\n            <div class="qdr-search__results"></div>\n\n            <div class="qdr-search__footer">\n                Powered by\n                <span class="qdr-search__logo"></span>\n            </div>\n        </div>\n    </div>\n  </div>',(t=document.createElement("div")).innerHTML='<div class="qdr-search" id="searchModal" tabindex="-1"\n    aria-labelledby="searchModalLabel" aria-hidden="true">\n    <div class="qdr-search__dialog">\n        <div class="qdr-search__content">\n            <div class="qdr-search__header">\n                <div class="qdr-search__title">\n                    <div class="qdr-search__icon">\n                        <span class="search-icon"></span>\n                    </div>\n                    <input type="text" class="qdr-search__input" placeholder="Search..."\n                          id="searchInput" aria-label="Search">\n                </div>\n\n                <button type="button" class="qdr-search__close" aria-label="Close">\n                    <span aria-hidden="true">&times;</span>\n                </button>\n            </div>\n\n            <div class="qdr-search__results"></div>\n\n            <div class="qdr-search__footer">\n                Powered by\n                <span class="qdr-search__logo"></span>\n            </div>\n        </div>\n    </div>\n  </div>'.trim(),t.firstElementChild)),new w({searchApiUrl:n})}}();